name: Debug AUR Package Build

on:
  repository_dispatch:
    types: 
      - 'aur-*'

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Debug Payload
      run: |
        echo "Event type: ${{ github.event.action }}"
        echo "Package Name: ${{ github.event.client_payload.package_name }}"
        echo "AUR URL: ${{ github.event.client_payload.aur_url }}"
        echo "Branch Type: ${{ github.event.client_payload.branch_type }}"
        echo "Full client payload:"
        echo '${{ toJson(github.event.client_payload) }}'

    - name: Debug Environment
      run: |
        echo "All environment variables:"
        env | sort
